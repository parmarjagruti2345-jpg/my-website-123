<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Student Toolkit</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://unpkg.com/pdf-lib/dist/pdf-lib.min.js"></script>

<style>
body{
margin:0;
font-family:'Segoe UI',sans-serif;
background:linear-gradient(135deg,#ffe6f7,#d6f0ff);
}
.header{
padding:20px;
font-size:26px;
font-weight:bold;
text-align:center;
background:white;
color:#ff4fa3;
box-shadow:0 5px 15px rgba(0,0,0,0.1);
}
.section{
min-height:100vh;
display:flex;
justify-content:center;
align-items:center;
flex-direction:column;
padding:20px;
}
.card{
background:white;
width:95%;
max-width:1100px;
padding:30px;
border-radius:25px;
box-shadow:0 20px 40px rgba(0,0,0,0.15);
text-align:center;
}
input, textarea, select{
padding:10px;
width:80%;
max-width:500px;
border-radius:12px;
border:1px solid #ddd;
margin:10px;
}
button{
padding:10px 20px;
border:none;
border-radius:30px;
background:linear-gradient(45deg,#ff7eb3,#65d6ff);
color:white;
cursor:pointer;
margin:10px;
font-weight:bold;
}
button:hover{transform:scale(1.05);}
.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
gap:20px;
margin-top:20px;
}
.tool{
background:#fdf2ff;
padding:20px;
border-radius:20px;
cursor:pointer;
font-weight:bold;
transition:0.3s;
}
.tool:hover{
background:#e0f7ff;
transform:scale(1.05);
}
.hidden{display:none;}
.editor{
border:1px solid #ccc;
min-height:300px;
padding:15px;
margin-top:10px;
text-align:left;
overflow:auto;
}
.toolbar button{
background:#eee;
color:black;
border-radius:6px;
}
</style>
</head>

<body>

<div class="header">üéì Student Toolkit</div>

<!-- LOGIN -->
<div class="section" id="page1">
<div class="card">
<h2>Enter Your Name</h2>
<input type="text" id="username">
<br>
<button onclick="goNext()">Enter</button>
<p id="msg" style="color:red;"></p>
</div>
</div>

<!-- DASHBOARD -->
<div class="section hidden" id="page2">
<div class="card">
<h2 id="welcome"></h2>
<h3>Select Tool</h3>

<div class="grid">
<div class="tool" onclick="openTool('textpdf')">üìù Text to PDF</div>
<div class="tool" onclick="openTool('imagepdf')">üñº Multiple Photo to PDF</div>
<div class="tool" onclick="openTool('convert')">üîÑ File Converter</div>
<div class="tool" onclick="openTool('resize')">üìè Photo Resize</div>
<div class="tool" onclick="openTool('singlephoto')">üì∏ Photo ‚Üí PDF</div>
<div class="tool" onclick="openTool('mergepdf')">üîó PDF Merge</div>
<div class="tool" onclick="openTool('splitpdf')">‚úÇÔ∏è PDF Split</div>
</div>

<button onclick="logout()">Logout</button>
</div>
</div>

<!-- TOOL PAGE -->
<div class="section hidden" id="toolPage">
<div class="card">
<h2 id="toolTitle"></h2>

<!-- TEXT TO PDF -->
<div id="textpdfTool" class="hidden">
<div class="toolbar">
<button onclick="format('bold')">Bold</button>
<button onclick="format('italic')">Italic</button>
<button onclick="format('underline')">Underline</button>
<select onchange="changeFontSize(this.value)">
<option value="12">Small</option>
<option value="16">Medium</option>
<option value="22">Large</option>
</select>
<button onclick="format('justifyLeft')">Left</button>
<button onclick="format('justifyCenter')">Center</button>
<button onclick="format('justifyRight')">Right</button>
<button onclick="addPage()">Add Page</button>
</div>

<div id="editor" class="editor" contenteditable="true">
Start typing...
</div>

<button onclick="generateTextPDF()">Download PDF</button>
</div>

<!-- MULTI IMAGE PDF -->
<div id="imagepdfTool" class="hidden">
<input type="file" id="multiImageInput" multiple>
<br>
<button onclick="generateMultiPDF()">Download PDF</button>
</div>

<!-- FILE CONVERTER -->
<div id="convertTool" class="hidden">
<input type="file" id="convertInput">
<select id="convertType">
<option value="png">JPG ‚Üí PNG</option>
<option value="jpg">PNG ‚Üí JPG</option>
<option value="pdf">Image ‚Üí PDF</option>
</select>
<br>
<button onclick="convertFile()">Download File</button>
</div>

<!-- RESIZE -->
<div id="resizeTool" class="hidden">
<input type="file" id="resizeInput" multiple>
<select id="targetSize">
<option value="1">1 KB</option>
<option value="5">5 KB</option>
<option value="10">10 KB</option>
<option value="50">50 KB</option>
<option value="100">100 KB</option>
<option value="200">200 KB</option>
<option value="500">500 KB</option>
<option value="1024">1 MB</option>
</select>
<br>
<button onclick="resizePhotos()">Download Resized</button>
</div>

<!-- SINGLE PHOTO -->
<div id="singlephotoTool" class="hidden">
<input type="file" id="singlePhoto">
<br>
<button onclick="photoToPDF()">Download PDF</button>
</div>

<!-- MERGE -->
<div id="mergepdfTool" class="hidden">
<input type="file" id="mergeInput" multiple accept="application/pdf">
<br>
<button onclick="mergePDF()">Download Merged PDF</button>
</div>

<!-- SPLIT -->
<div id="splitpdfTool" class="hidden">
<input type="file" id="splitInput" accept="application/pdf">
<input type="number" id="fromPage" placeholder="From Page">
<input type="number" id="toPage" placeholder="To Page">
<br>
<button onclick="splitPDF()">Download Split PDF</button>
</div>

<button onclick="goBack()">Back</button>

</div>
</div>

<script>
const { jsPDF } = window.jspdf;
const { PDFDocument } = PDFLib;

/* LOGIN */
function goNext(){
let name=username.value.trim();
if(!name){msg.innerText="Enter name";return;}
page1.classList.add("hidden");
page2.classList.remove("hidden");
welcome.innerText="Hello "+name+" üëã";
}
function logout(){location.reload();}

/* NAV */
function openTool(tool){
page2.classList.add("hidden");
toolPage.classList.remove("hidden");
document.querySelectorAll("#toolPage .card > div").forEach(d=>d.classList.add("hidden"));
document.getElementById(tool+"Tool").classList.remove("hidden");
toolTitle.innerText=document.querySelector("[onclick=\"openTool('"+tool+"')\"]").innerText;
}
function goBack(){
toolPage.classList.add("hidden");
page2.classList.remove("hidden");
}

/* TEXT PDF */
function format(cmd){document.execCommand(cmd,false,null);}
function changeFontSize(size){
document.execCommand("fontSize",false,"7");
let fonts=document.getElementsByTagName("font");
for(let i=0;i<fonts.length;i++){
if(fonts[i].size=="7"){
fonts[i].removeAttribute("size");
fonts[i].style.fontSize=size+"px";
}
}
}
function addPage(){
editor.innerHTML+="<div style='page-break-after:always; margin-top:40px;'></div>";
}
function generateTextPDF(){
let doc=new jsPDF();
doc.html(editor,{callback:function(doc){
doc.save("document.pdf");
}});
}

/* MULTI IMAGE */
async function generateMultiPDF(){
let files=multiImageInput.files;
let doc=new jsPDF();
for(let i=0;i<files.length;i++){
let data=await files[i].arrayBuffer();
let base64=await toBase64(files[i]);
if(i>0)doc.addPage();
doc.addImage(base64,'JPEG',10,10,180,160);
}
doc.save("multiple.pdf");
}

/* CONVERT */
function convertFile(){
let file=convertInput.files[0];
let type=convertType.value;
if(!file)return;
let reader=new FileReader();
reader.onload=function(e){
if(type==="pdf"){
let doc=new jsPDF();
doc.addImage(e.target.result,'JPEG',10,10,180,160);
doc.save("converted.pdf");
}else{
let img=new Image();
img.onload=function(){
let canvas=document.createElement("canvas");
canvas.width=img.width;
canvas.height=img.height;
canvas.getContext("2d").drawImage(img,0,0);
let link=document.createElement("a");
link.href=canvas.toDataURL("image/"+type);
link.download="converted."+type;
link.click();
}
img.src=e.target.result;
}
}
reader.readAsDataURL(file);
}

/* RESIZE */
async function resizePhotos(){
let files=resizeInput.files;
let targetKB=parseInt(targetSize.value);
for(let i=0;i<files.length;i++){
let base64=await toBase64(files[i]);
let img=new Image();
img.src=base64;
await new Promise(res=>img.onload=res);
let canvas=document.createElement("canvas");
canvas.width=img.width;
canvas.height=img.height;
canvas.getContext("2d").drawImage(img,0,0);
let quality=0.9;
let dataURL=canvas.toDataURL("image/jpeg",quality);
while((dataURL.length/1024)>targetKB && quality>0.1){
quality-=0.05;
dataURL=canvas.toDataURL("image/jpeg",quality);
}
let link=document.createElement("a");
link.href=dataURL;
link.download="resized_"+i+".jpg";
link.click();
}
}

/* PHOTO TO PDF */
async function photoToPDF(){
let base64=await toBase64(singlePhoto.files[0]);
let doc=new jsPDF();
doc.addImage(base64,'JPEG',10,10,180,160);
doc.save("photo.pdf");
}

/* MERGE */
async function mergePDF(){
const mergedPdf=await PDFDocument.create();
for(let file of mergeInput.files){
const pdfBytes=await file.arrayBuffer();
const pdf=await PDFDocument.load(pdfBytes);
const pages=await mergedPdf.copyPages(pdf,pdf.getPageIndices());
pages.forEach(p=>mergedPdf.addPage(p));
}
const bytes=await mergedPdf.save();
downloadPDF(bytes,"merged.pdf");
}

/* SPLIT */
async function splitPDF(){
let file=splitInput.files[0];
let from=parseInt(fromPage.value)-1;
let to=parseInt(toPage.value)-1;
const pdfBytes=await file.arrayBuffer();
const pdfDoc=await PDFDocument.load(pdfBytes);
const newPdf=await PDFDocument.create();
const pages=await newPdf.copyPages(pdfDoc,pdfDoc.getPageIndices().slice(from,to+1));
pages.forEach(p=>newPdf.addPage(p));
const bytes=await newPdf.save();
downloadPDF(bytes,"split.pdf");
}

function downloadPDF(bytes,name){
let blob=new Blob([bytes],{type:"application/pdf"});
let link=document.createElement("a");
link.href=URL.createObjectURL(blob);
link.download=name;
link.click();
}
function toBase64(file){
return new Promise(resolve=>{
let reader=new FileReader();
reader.onload=e=>resolve(e.target.result);
reader.readAsDataURL(file);
});
}
</script>

</body>
</html>

